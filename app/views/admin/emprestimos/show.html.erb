<h1 class="mb-4 text-primary">ğŸ“„ Detalhes do EmprÃ©stimo</h1>

<div class="mb-4">
  <% devolvido = @emprestimo.data_devolucao_efetiva.present? %>
  <% badge_class = devolvido ? "bg-success" : "bg-warning text-dark" %>
  <span class="badge <%= badge_class %> fs-6 px-3 py-2">
    <%= devolvido ? "Devolvido" : "Em aberto" %>
  </span>
</div>

<div class="row g-4">
  <div class="col-lg-6">
    <div class="card h-100">
      <div class="card-header fw-bold">ğŸŸï¸ InformaÃ§Ãµes do Cliente</div>
      <div class="card-body">
        <p class="mb-1"><strong>Nome:</strong> <%= @emprestimo.cliente&.nome || "Cliente sem nome" %></p>
        <p class="mb-1"><strong>Email:</strong> <%= @emprestimo.cliente&.email %></p>
        <p class="mb-0"><strong>Telefone:</strong> <%= @emprestimo.cliente&.telefone.presence || "NÃ£o informado" %></p>
      </div>
    </div>
  </div>

  <div class="col-lg-6">
    <div class="card h-100">
      <div class="card-header fw-bold">ğŸ¬ Detalhes do Filme</div>
      <div class="card-body">
        <p class="mb-1"><strong>TÃ­tulo:</strong> <%= @emprestimo.copia_filme&.filme&.titulo || "Filme removido" %></p>
        <p class="mb-1"><strong>MÃ­dia:</strong> <%= @emprestimo.copia_filme&.tipo_midia %></p>
        <p class="mb-0"><strong>Status da cÃ³pia:</strong> <%= @emprestimo.copia_filme&.status %></p>
      </div>
    </div>
  </div>
</div>

<div class="card mt-4">
  <div class="card-header fw-bold">â±ï¸ Datas e Valores</div>
  <div class="card-body">
    <div class="row">
      <div class="col-md-6">
        <p><strong>Data do emprÃ©stimo:</strong><br>
          <%= @emprestimo.data_emprestimo.present? ? l(@emprestimo.data_emprestimo, format: :long) : "â€”" %>
        </p>
        <p><strong>Data prevista para devoluÃ§Ã£o:</strong><br>
          <%= @emprestimo.data_prevista_devolucao.present? ? l(@emprestimo.data_prevista_devolucao, format: :long) : "â€”" %>
        </p>
      </div>
      <div class="col-md-6">
        <p><strong>Data de devoluÃ§Ã£o efetiva:</strong><br>
          <%= @emprestimo.data_devolucao_efetiva.present? ? l(@emprestimo.data_devolucao_efetiva, format: :long) : "â€”" %>
        </p>
        <p><strong>Valor da locaÃ§Ã£o:</strong><br>
          <%= @emprestimo.valor_locacao.present? ? number_to_currency(@emprestimo.valor_locacao) : "â€”" %>
        </p>
        <p class="mb-0"><strong>Valor da multa:</strong><br>
          <%= @emprestimo.valor_multa.present? ? number_to_currency(@emprestimo.valor_multa) : "â€”" %>
        </p>
      </div>
    </div>
  </div>
</div>

<div class="d-flex gap-2 mt-4">
  <%= link_to "â¬…ï¸ Voltar", admin_emprestimos_path, class: "btn btn-secondary" %>
  <%= link_to "Ir para o cliente", admin_cliente_path(@emprestimo.cliente), class: "btn btn-outline-primary" if @emprestimo.cliente.present? %>
  <%= link_to "Ver filme", admin_filme_path(@emprestimo.copia_filme.filme), class: "btn btn-outline-dark" if @emprestimo.copia_filme&.filme.present? %>
</div>
